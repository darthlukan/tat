<ion-header>
  <ion-toolbar></ion-toolbar>
</ion-header>

<ion-content padding>
  <h1>{{ 'volunteer.title' | translate }}</h1>
  <ion-icon *ngIf="userDataService.data" name="md-menu" class="modal-close-btn" slot="fixed" (click)="modalService.open(VolunteerSettingsComponent)"></ion-icon>

  <div *ngIf="!userDataService.fetchingUserData && !alertIsVisible && !loadingIsVisible && (userDataService.loadError || !userDataService.data && !modalService.getActiveModal())">
    <p>{{ 'misc.messages.dataLoadError' | translate }}</p>
    <ion-button fill="solid" color="primary" size="default" (click)="userDataService.fetchUserData()">
      {{ 'misc.buttons.retry' | translate }}
    </ion-button>
    <ion-button fill="solid" color="primary" size="default" (click)="angularFireAuth.auth.signOut()">
      {{ 'volunteer.settings.logout' | translate }}
    </ion-button>
  </div>

  <div *ngIf="userDataService.data">
    <p *ngIf="userDataService.data.firstName" class="first-name">{{ 'volunteer.welcome' | translate }}, {{userDataService.data.firstName}}</p>
    <p>{{ 'volunteer.intro' | translate }}</p>

    <image-button
      image="volunteer.training-video.jpg"
      (click)="openTrainingVideo()"
      [required]="userDataService.data.volunteerType !== VolunteerType.AMBASSADOR_VOLUNTEER"
      [completed]="userDataService.data.hasWatchedTrainingVideo">
        {{ 'volunteer.btns.trainingVideo' | translate }}
    </image-button>

    <image-button
      *ngIf="!userDataService.data.hasCompletedTrainingFeedback"
      image="volunteer.training-video-feedback.jpg"
      (click)="showTrainingVideoFeedbackForm()"
      [required]="true"
      [completed]="userDataService.data.hasCompletedTrainingFeedback"
      [disabled]="!(userDataService.data.hasWatchedTrainingVideo && !userDataService.data.hasCompletedTrainingFeedback)">
        {{ 'volunteer.btns.trainingFeedback' | translate }}
    </image-button>

    <image-button
      *ngIf="userDataService.data.volunteerType === VolunteerType.VOLUNTEER_DISTRIBUTOR && userDataService.data.isTeamCoordinator"
      image="volunteer.pre-outreach-survey.jpg"
      (click)="showPreOutreachForm()"
      [required]="true"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback">
        {{ 'volunteer.btns.preOutreachSurvey' | translate }}
    </image-button>

    <image-button
      *ngIf="userDataService.data.volunteerType !== VolunteerType.VOLUNTEER_DISTRIBUTOR"
      image="volunteer.pre-outreach-survey.jpg"
      (click)="showPreEventForm()"
      [required]="true"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback">
        {{ 'volunteer.btns.preEventSurvey' | translate }}
    </image-button>
    
    <image-button
      image="volunteer.resources.jpg"
      (click)="modalService.open(VolunteerResourcesComponent)"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback">
        {{ 'volunteer.btns.resources' | translate }}
    </image-button>
    
    <image-button
      *ngIf="userDataService.data.volunteerType === VolunteerType.VOLUNTEER_DISTRIBUTOR"
      image="volunteer.post-outreach-report.jpg"
      (click)="modalService.open(PostOutreachSelectionComponent)"
      [required]="true"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback || userDataService.data.unfinishedActivities.length === 0">
        {{ 'volunteer.btns.postOutreachReport' | translate }}
    </image-button>
    
    <image-button
      *ngIf="userDataService.data.volunteerType !== VolunteerType.VOLUNTEER_DISTRIBUTOR"
      image="volunteer.post-outreach-report.jpg"
      (click)="modalService.open(PostEventSelectionComponent)"
      [required]="true"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback || userDataService.data.unfinishedActivities.length === 0">
        {{ 'volunteer.btns.postEventReport' | translate }}
    </image-button>

    <image-button
      image="volunteer.hours-log.jpg"
      (click)="modalService.open(HoursLogComponent)"
      [required]="true"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback">
        {{ 'volunteer.btns.hoursLog' | translate }}
    </image-button>
    
    <image-button
      image="volunteer.testimonial.jpg"
      (click)="showFeedbackForm()"
      [disabled]="!userDataService.data.hasCompletedTrainingFeedback">
        {{ 'volunteer.btns.testimonial' | translate }}
    </image-button>
  </div>
</ion-content>
